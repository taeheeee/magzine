{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from \"react\";\nimport _ from \"lodash\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst InfinityScroll = props => {\n  _s();\n\n  // callNext: 받아온 다음 리스트로 보내버려\n  const {\n    children,\n    callNext,\n    is_next,\n    loading\n  } = props; // 300밀리초에 한번만 실행해라\n\n  const _handleScroll = _.throttle(() => {\n    // 로딩중이니? 그러면 끝내라\n    if (loading) {\n      return;\n    }\n\n    const {\n      innerHeight\n    } = window;\n    const {\n      scrollHeight\n    } = document.body;\n    const scrollTop = document.documentElement & document.documentElement.scrollTop || document.body.scrollTop;\n    if (scrollHeight - innerHeight) callNext();\n  }, 300);\n\n  const handleScroll = React.useCallback(_handleScroll, [loading]);\n  React.useEffect(() => {\n    if (loading) {\n      return;\n    }\n\n    if (is_next) {\n      window.addEventListener(\"scroll\", handleScroll);\n    } else {\n      window.removeEventListener(\"scroll\", handleScroll);\n    }\n\n    return () => window.removeEventListener(\"scroll\", handleScroll); // 클래스형컴포넌트에서는 이벤트 언마운트==함수형컴포넌트에서는 return넘겨버리면된다.\n  }, [is_next, loading]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: props.children\n  }, void 0, false);\n};\n\n_s(InfinityScroll, \"8BseBLutViIVp8ya6fspMHeE7wM=\");\n\n_c = InfinityScroll;\nInfinityScroll.defaultProps = {\n  children: null,\n  callNext: () => {},\n  is_next: false,\n  loading: false\n};\nexport default InfinityScroll;\n\nvar _c;\n\n$RefreshReg$(_c, \"InfinityScroll\");","map":{"version":3,"sources":["C:/Users/coms/OneDrive/문서/GitHub/hanghae-react-intensive/week2/src/shared/InfinityScroll.js"],"names":["React","_","InfinityScroll","props","children","callNext","is_next","loading","_handleScroll","throttle","innerHeight","window","scrollHeight","document","body","scrollTop","documentElement","handleScroll","useCallback","useEffect","addEventListener","removeEventListener","defaultProps"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,CAAP,MAAc,QAAd;;;;AAEA,MAAMC,cAAc,GAAIC,KAAD,IAAW;AAAA;;AAChC;AACA,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,QAAZ;AAAsBC,IAAAA,OAAtB;AAA+BC,IAAAA;AAA/B,MAA2CJ,KAAjD,CAFgC,CAGhC;;AACA,QAAMK,aAAa,GAAGP,CAAC,CAACQ,QAAF,CAAW,MAAM;AACrC;AACA,QAAIF,OAAJ,EAAa;AACX;AACD;;AAED,UAAM;AAACG,MAAAA;AAAD,QAAgBC,MAAtB;AACA,UAAM;AAACC,MAAAA;AAAD,QAAiBC,QAAQ,CAACC,IAAhC;AAEA,UAAMC,SAAS,GAAIF,QAAQ,CAACG,eAAT,GAAyBH,QAAQ,CAACG,eAAT,CAAyBD,SAAnD,IAAgEF,QAAQ,CAACC,IAAT,CAAcC,SAAhG;AAEA,QAAGH,YAAY,GAACF,WAAhB,EACAL,QAAQ;AACT,GAbqB,EAanB,GAbmB,CAAtB;;AAeA,QAAMY,YAAY,GAAGjB,KAAK,CAACkB,WAAN,CAAkBV,aAAlB,EAAiC,CAACD,OAAD,CAAjC,CAArB;AAEAP,EAAAA,KAAK,CAACmB,SAAN,CAAgB,MAAM;AACpB,QAAIZ,OAAJ,EAAa;AACX;AACD;;AACD,QAAID,OAAJ,EAAa;AACXK,MAAAA,MAAM,CAACS,gBAAP,CAAwB,QAAxB,EAAkCH,YAAlC;AACD,KAFD,MAEO;AACLN,MAAAA,MAAM,CAACU,mBAAP,CAA2B,QAA3B,EAAqCJ,YAArC;AACD;;AAED,WAAO,MAAMN,MAAM,CAACU,mBAAP,CAA2B,QAA3B,EAAqCJ,YAArC,CAAb,CAVoB,CAWpB;AACD,GAZD,EAYG,CAACX,OAAD,EAAUC,OAAV,CAZH;AAaA,sBAAO;AAAA,cAAGJ,KAAK,CAACC;AAAT,mBAAP;AACD,CAnCD;;GAAMF,c;;KAAAA,c;AAqCNA,cAAc,CAACoB,YAAf,GAA8B;AAC5BlB,EAAAA,QAAQ,EAAE,IADkB;AAE5BC,EAAAA,QAAQ,EAAE,MAAM,CAAE,CAFU;AAG5BC,EAAAA,OAAO,EAAE,KAHmB;AAI5BC,EAAAA,OAAO,EAAE;AAJmB,CAA9B;AAMA,eAAeL,cAAf","sourcesContent":["import React from \"react\";\r\nimport _ from \"lodash\";\r\n\r\nconst InfinityScroll = (props) => {\r\n  // callNext: 받아온 다음 리스트로 보내버려\r\n  const { children, callNext, is_next, loading } = props;\r\n  // 300밀리초에 한번만 실행해라\r\n  const _handleScroll = _.throttle(() => {\r\n    // 로딩중이니? 그러면 끝내라\r\n    if (loading) {\r\n      return;\r\n    }\r\n\r\n    const {innerHeight} = window;\r\n    const {scrollHeight} = document.body;\r\n\r\n    const scrollTop = (document.documentElement&document.documentElement.scrollTop)|| document.body.scrollTop;\r\n    \r\n    if(scrollHeight-innerHeight)\r\n    callNext();\r\n  }, 300);\r\n\r\n  const handleScroll = React.useCallback(_handleScroll, [loading]);\r\n\r\n  React.useEffect(() => {\r\n    if (loading) {\r\n      return;\r\n    }\r\n    if (is_next) {\r\n      window.addEventListener(\"scroll\", handleScroll);\r\n    } else {\r\n      window.removeEventListener(\"scroll\", handleScroll);\r\n    }\r\n\r\n    return () => window.removeEventListener(\"scroll\", handleScroll);\r\n    // 클래스형컴포넌트에서는 이벤트 언마운트==함수형컴포넌트에서는 return넘겨버리면된다.\r\n  }, [is_next, loading]);\r\n  return <>{props.children}</>;\r\n};\r\n\r\nInfinityScroll.defaultProps = {\r\n  children: null,\r\n  callNext: () => {},\r\n  is_next: false,\r\n  loading: false,\r\n};\r\nexport default InfinityScroll;\r\n"]},"metadata":{},"sourceType":"module"}